// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  name      String
  profileType String // "Applicant" or "Organization"
  bio       String?
  location  String?
  description String? // For organizations
  website   String?  // For organizations
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relations
  sentVerifications     Verification[] @relation("OrganizationVerifications")
  receivedVerifications Verification[] @relation("ApplicantVerifications")
  activities            Activity[]

  @@map("users")
}

model Verification {
  id              String   @id @default(cuid())
  organizationId  String
  applicantId     String?
  applicantEmail  String
  title           String
  description     String?
  startDate       String
  endDate         String?
  position        String?
  category        String?
  status          String   @default("pending") // "pending", "accepted", "rejected"
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  // Relations
  organization    User     @relation("OrganizationVerifications", fields: [organizationId], references: [id])
  applicant       User?    @relation("ApplicantVerifications", fields: [applicantId], references: [id])

  @@map("verifications")
}

model Activity {
  id            String   @id @default(cuid())
  userId        String
  name          String
  category      String
  description   String
  startDate     String
  endDate       String?
  hoursPerWeek  Float?
  totalHours    Float?
  position      String?
  organization  String?
  verified      Boolean  @default(false)
  notes         String?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  // Relations
  user          User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("activities")
}
